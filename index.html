<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 å¹´ä¼šæŠ½å¥–æœ€ç»ˆç‰ˆ</title>
    <style>
        :root {
            --red: #e74c3c;
            --gold: #f1c40f;
            --dark: #2c3e50;
            --grey: #f4f4f4;
        }

        body {
            font-family: -apple-system, "PingFang SC", sans-serif;
            background: #fdf2f2;
            margin: 0; padding: 15px;
            color: var(--dark);
        }

        .container { max-width: 600px; margin: 0 auto; }
        h2 { text-align: center; color: var(--red); margin-bottom: 20px; letter-spacing: 2px; }

        .card {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.1);
            margin-bottom: 20px;
        }

        label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 0.95rem; color: #444; }
        
        textarea {
            width: 100%;
            border: 1.5px solid #eee;
            border-radius: 12px;
            padding: 12px;
            box-sizing: border-box;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            transition: border-color 0.3s;
            outline: none;
            background-color: #fafafa;
        }

        textarea:focus { border-color: var(--red); background-color: #fff; }

        .hint { font-size: 0.8rem; color: #999; margin-top: -10px; margin-bottom: 15px; }

        button {
            width: 100%; padding: 16px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white; border: none; border-radius: 30px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 6px 15px rgba(231, 76, 60, 0.3);
        }

        /* ç»“æœå±•ç¤º */
        .result-table { width: 100%; border-collapse: collapse; }
        .result-table th { text-align: left; padding: 12px 8px; color: #999; font-size: 0.8rem; border-bottom: 2px solid var(--grey); }
        .result-table td { padding: 14px 8px; border-bottom: 1px solid #f9f9f9; }

        .tag { padding: 3px 10px; border-radius: 6px; font-size: 0.75rem; font-weight: bold; }
        .tag-1 { background: #721c24; color: #fff; } /* ç‰¹ç­‰ */
        .tag-2 { background: #fff3cd; color: #856404; } /* ä¸€ç­‰ */
        .tag-3 { background: #d1ecf1; color: #0c5460; } /* äºŒç­‰ */
        .tag-4 { background: #d4edda; color: #155724; } /* ä¸‰ç­‰ */
        .tag-5 { background: #e2e3e5; color: #383d41; } /* é˜³å…‰ */

        .winner-name { font-weight: bold; }
        .hidden { display: none; }
        .footer-action { display: flex; gap: 10px; margin-top: 25px; }
        .btn-secondary { background: white; color: var(--red); border: 1.5px solid var(--red); box-shadow: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>2026 å¹´ä¼šæŠ½å¥–ç³»ç»Ÿ</h2>

    <div id="setup-view">
        <div class="card">
            <label>ğŸ‘¤ å…¨ä½“æˆå‘˜ (37äºº)</label>
            <textarea id="all-members" style="height: 120px;">å•æ™¨æ›¦
ç‹åš
å¼ å¿—å³°
ææ™º
é‚µæ–°ä¹
æœèˆ’æƒ 
åˆ˜æ˜é‘«
å¾èª
é«˜å¯è’™
é™¶é›ª
æ´ªå…‰ç¡•
ä¹æ¬£
éƒ‘æ­£
å¼ ä¼Ÿå…‰
é™ˆå±±
å†¯æ ‘æƒ
ç‹èè
æ²ˆè¶…
ç‹å»¶çŒ›
å·¦å¼º
é™ˆä½³éœ–
å¼ æ™”
åˆ˜å®
æå¾·
å¾é›¯é›¯
é©¬éºŸ
æœ´æ°¸å¼º
è–›åˆšåˆš
æ¨æ™¨
é™ˆæ°
ç¥è®­
ç‹å€©èŒ¹
å«äºšé‘«
é»„é“®
è´¾æ€çª
æ¨ç¿ å®‡</textarea>
            
            <label>ğŸŒŸ ç¾½æ¯›çƒæ¯”èµ›ç‰¹ç­‰å¥–åå• (6äºº)</label>
            <textarea id="special-members" style="height: 110px;">åˆ˜å°ç”·
æœèˆ’æƒ 
ç‹å»¶çŒ›
æœ´æ°¸å¼º
å†¯æ ‘æƒ
é™ˆæ°</textarea>
            <p class="hint">ç³»ç»Ÿé€»è¾‘ï¼šä»¥ä¸Š 6 äººä¸ºç¾½æ¯›çƒæ¯”èµ›çš„ç‰¹ç­‰å¥–é€‰æ‰‹ï¼Œä¸å‚ä¸å‰©ä½™å¥–é¡¹éšæœºæŠ½å–ã€‚</p>

            <button onclick="generateAndSort()">ä¸€é”®å…¨è‡ªåŠ¨åˆ†é…</button>
        </div>
    </div>

    <div id="result-view" class="hidden">
        <div class="card">
            <h3 style="text-align: center; color: var(--red);">ğŸ‰ æœ€ç»ˆè·å¥–å…¬ç¤º</h3>
            <table class="result-table">
                <thead>
                    <tr>
                        <th>è·å¥–è€…</th>
                        <th>å¥–é¡¹</th>
                        <th>å¥–å“</th>
                    </tr>
                </thead>
                <tbody id="result-body"></tbody>
            </table>
        </div>
        <div class="footer-action">
            <button class="btn-secondary" onclick="goBack()">è¿”å›è°ƒæ•´</button>
            <button onclick="window.print()">ä¿å­˜/æˆªå›¾ç»“æœ</button>
        </div>
    </div>
</div>

<script>
    const PRIZE_DEFS = {
        'ç‰¹ç­‰å¥–': { weight: 1 },
        'ä¸€ç­‰å¥–': { weight: 2 },
        'äºŒç­‰å¥–': { weight: 3 },
        'ä¸‰ç­‰å¥–': { weight: 4 },
        'é˜³å…‰æ™®ç…§': { weight: 5 }
    };

    function generateAndSort() {
        const allList = document.getElementById('all-members').value.split('\n').map(n => n.trim()).filter(n => n);
        const specList = document.getElementById('special-members').value.split('\n').map(n => n.trim()).filter(n => n);

        // 1. è¿‡æ»¤æ‰æŒ‡å®šäººå‘˜
        const randomPool = allList.filter(name => !specList.includes(name));

        // 2. å‡†å¤‡å‰©ä½™å¥–å“æ±  (ç‰¹ç­‰å¥–å‰©ä¸‹ 8-6=2 ä¸ª)
        let prizeItems = [];
        for(let i=0; i<2; i++) prizeItems.push({ level: 'ç‰¹ç­‰å¥–', name: 'åŠ æ¹¿å™¨' });
        for(let i=0; i<6; i++) prizeItems.push({ level: 'ä¸€ç­‰å¥–', name: 'é¼ æ ‡' });
        for(let i=0; i<5; i++) prizeItems.push({ level: 'äºŒç­‰å¥–', name: 'ç”µå­ç§¤' });
        for(let i=0; i<10; i++) prizeItems.push({ level: 'ä¸‰ç­‰å¥–', name: 'çƒ­æ°´å£¶' });
        
        let luckyPrizes = [];
        for(let i=0; i<8; i++) luckyPrizes.push('å“‘é“ƒ');
        for(let i=0; i<7; i++) luckyPrizes.push('è’¸è›‹å™¨');
        shuffle(luckyPrizes);
        luckyPrizes.forEach(p => prizeItems.push({ level: 'é˜³å…‰æ™®ç…§', name: p }));

        // 3. æ´—ç‰Œ
        shuffle(randomPool);
        shuffle(prizeItems);

        // 4. åˆ†é…
        let results = [];
        specList.forEach(name => results.push({ name, level: 'ç‰¹ç­‰å¥–', prize: 'åŠ æ¹¿å™¨' }));
        randomPool.forEach((name, i) => {
            const p = prizeItems[i] || { level: 'é˜³å…‰æ™®ç…§', name: 'æƒŠå–œå°ç¤¼ç‰©' };
            results.push({ name, level: p.level, prize: p.name });
        });

        // 5. æ’åºæ¸²æŸ“
        results.sort((a, b) => PRIZE_DEFS[a.level].weight - PRIZE_DEFS[b.level].weight);

        const tbody = document.getElementById('result-body');
        tbody.innerHTML = '';
        results.forEach(item => {
            const w = PRIZE_DEFS[item.level].weight;
            tbody.innerHTML += `<tr><td class="winner-name">${item.name}</td><td><span class="tag tag-${w}">${item.level}</span></td><td style="color:#666;font-size:0.9rem">${item.prize}</td></tr>`;
        });

        document.getElementById('setup-view').classList.add('hidden');
        document.getElementById('result-view').classList.remove('hidden');
    }

    function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
    }

    function goBack() {
        document.getElementById('setup-view').classList.remove('hidden');
        document.getElementById('result-view').classList.add('hidden');
    }
</script>
</body>
</html>