<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¹´ä¼šå¹¸è¿å¤§æŠ½å¥–</title>
    <style>
        :root {
            --primary-color: #e74c3c;
            --gold-color: #f1c40f;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: #fdf2f2;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }

        /* é¡¶éƒ¨æ ‡é¢˜ */
        .header {
            background: var(--primary-color);
            color: white;
            width: 100%;
            text-align: center;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        /* å¥–æ± çŠ¶æ€åŒº */
        .status-container {
            width: 90%;
            margin: 20px 0;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            font-size: 14px;
        }

        .prize-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }

        /* ä¸»å±•ç¤ºåŒº */
        .display-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 90%;
            text-align: center;
        }

        #result-box {
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s;
        }

        .prize-level {
            font-size: 1.2rem;
            color: #666;
        }

        .prize-name {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 10px;
        }

        /* æŒ‰é’®è®¾è®¡ */
        .draw-btn {
            background: linear-gradient(180deg, #ff5e62, #ff9966);
            color: white;
            border: none;
            padding: 15px 60px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 50px;
            box-shadow: 0 6px 0 #d35400, 0 10px 20px rgba(0,0,0,0.2);
            cursor: pointer;
            margin-bottom: 40px;
            transition: all 0.1s;
            -webkit-tap-highlight-color: transparent;
        }

        .draw-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #d35400, 0 5px 10px rgba(0,0,0,0.2);
        }

        .draw-btn:disabled {
            background: #ccc;
            box-shadow: none;
            transform: none;
        }

        /* æ­å–œä¸­å¥–åŠ¨æ•ˆ */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .congrats-content {
            background: white;
            width: 80%;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            animation: popUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        @keyframes popUp {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .confetti {
            position: absolute;
            width: 10px; height: 10px;
            animation: fall 3s infinite;
        }

        @keyframes fall {
            to { transform: translateY(500px) rotate(360deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ å¹¸è¿å¤§æŠ½å¥–</h1>
    </div>

    <div class="status-container" id="stock-display">
        </div>

    <div class="display-area">
        <div id="result-box">
            <div class="prize-level">æœŸå¾…ä½ çš„å¥½è¿</div>
            <div class="prize-name">å‡†å¤‡å¥½äº†å—ï¼Ÿ</div>
        </div>
    </div>

    <button class="draw-btn" id="drawBtn" onclick="draw()">ç«‹å³æŠ½å¥–</button>

    <div class="modal" id="modal" onclick="closeModal()">
        <div class="congrats-content">
            <h2 style="color: var(--primary-color);">æ­å–œä¸­å¥–ï¼ğŸ‰</h2>
            <div id="modal-result" style="font-size: 1.5rem; margin: 20px 0;"></div>
            <button style="padding: 10px 20px; border: none; background: #eee; border-radius: 5px;">ç‚¹å‡»å…³é—­</button>
        </div>
    </div>

    <script>
        // 1. åˆå§‹åŒ–å¥–æ± æ•°æ®
        let prizePool = [
            { id: 1, level: 'ç‰¹ç­‰å¥–', name: 'åŠ æ¹¿å™¨', total: 2, current: 2 },
            { id: 2, level: 'ä¸€ç­‰å¥–', name: 'é¼ æ ‡', total: 6, current: 6 },
            { id: 3, level: 'äºŒç­‰å¥–', name: 'ç”µå­ç§¤', total: 5, current: 5 },
            { id: 4, level: 'ä¸‰ç­‰å¥–', name: 'çƒ­æ°´å£¶', total: 10, current: 10 },
            { id: 5, level: 'é˜³å…‰æ™®ç…§', name: 'å“‘é“ƒ', total: 8, current: 8 },
            { id: 6, level: 'é˜³å…‰æ™®ç…§', name: 'è’¸è›‹å™¨', total: 7, current: 7 }
        ];

        // 2. æ›´æ–°åº“å­˜æ˜¾ç¤º
        function updateStockDisplay() {
            const container = document.getElementById('stock-display');
            let html = '<strong>å¥–æ± ä½™é‡ï¼š</strong>';
            let allEmpty = true;
            
            prizePool.forEach(p => {
                if(p.current > 0) allEmpty = false;
                html += `
                    <div class="prize-item">
                        <span>${p.level}-${p.name}</span>
                        <span><b>${p.current}</b> / ${p.total}</span>
                    </div>`;
            });

            if(allEmpty) {
                document.getElementById('drawBtn').disabled = true;
                document.getElementById('drawBtn').innerText = 'å¥–å“å·²æŠ½å®Œ';
            }
            container.innerHTML = html;
        }

        // 3. æŠ½å¥–é€»è¾‘
        function draw() {
            // æ„å»ºéšæœºæ•°ç»„ï¼ˆä»…åŒ…å«æœ‰åº“å­˜çš„ï¼‰
            let lotteryList = [];
            prizePool.forEach((p, index) => {
                for(let i = 0; i < p.current; i++) {
                    lotteryList.push(index);
                }
            });

            if(lotteryList.length === 0) return;

            // ç®€å•çš„éšæœºé€‰å–
            const randomIndex = Math.floor(Math.random() * lotteryList.length);
            const prizeIndex = lotteryList[randomIndex];
            const winner = prizePool[prizeIndex];

            // æ‰£å‡åº“å­˜
            winner.current--;

            // æ‰§è¡ŒåŠ¨æ•ˆå±•ç¤º
            showResult(winner);
        }

        // 4. å±•ç¤ºç»“æœä¸åŠ¨æ•ˆ
        function showResult(prize) {
            const btn = document.getElementById('drawBtn');
            btn.disabled = true;

            // æ¨¡æ‹ŸæŠ½å¥–æ»šåŠ¨æ•ˆæœ
            let count = 0;
            const interval = setInterval(() => {
                const tempPrize = prizePool[Math.floor(Math.random() * prizePool.length)];
                document.getElementById('result-box').innerHTML = `
                    <div class="prize-level">æ­£åœ¨å¼€å¥–...</div>
                    <div class="prize-name">${tempPrize.name}</div>
                `;
                count++;
                if(count > 10) {
                    clearInterval(interval);
                    finalizeResult(prize);
                }
            }, 100);
        }

        function finalizeResult(prize) {
            // æ›´æ–°é¡µé¢æ–‡å­—
            document.getElementById('result-box').innerHTML = `
                <div class="prize-level">${prize.level}</div>
                <div class="prize-name">${prize.name}</div>
            `;
            
            // å¼¹å‡ºæ­å–œçª—å£
            document.getElementById('modal-result').innerHTML = `
                <div style="color: #666; font-size: 1rem;">${prize.level}</div>
                <div style="font-weight: bold; color: #e74c3c; margin-top:5px;">${prize.name}</div>
            `;
            document.getElementById('modal').style.display = 'flex';
            
            // åˆ›å»ºå½©çº¸å±‘
            createConfetti();

            // æ›´æ–°åº“å­˜
            updateStockDisplay();
            document.getElementById('drawBtn').disabled = false;
        }

        // 5. è¾…åŠ©åŠŸèƒ½ï¼šå½©çº¸å±‘åŠ¨æ•ˆ
        function createConfetti() {
            const modal = document.getElementById('modal');
            for(let i=0; i<30; i++) {
                const div = document.createElement('div');
                div.className = 'confetti';
                div.style.left = Math.random() * 100 + '%';
                div.style.top = '-10px';
                div.style.backgroundColor = ['#f1c40f','#e74c3c','#3498db','#2ecc71'][Math.floor(Math.random()*4)];
                div.style.transform = `rotate(${Math.random()*360}deg)`;
                modal.appendChild(div);
                setTimeout(() => div.remove(), 3000);
            }
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // åˆå§‹åŒ–
        updateStockDisplay();
    </script>
</body>
</html>